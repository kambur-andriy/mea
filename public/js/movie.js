!function(e){var t={};function i(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i(i.s=47)}({47:function(e,t,i){e.exports=i(48)},48:function(e,t){$(document).ready(function(){$("#search_form").on("submit",function(e){e.preventDefault();var t=$('input[type="text"]',$(this)).val().toLowerCase();$("#files_list tr").each(function(){var e=$("td:eq(1)",$(this)).text(),i=$("td:eq(2)",$(this)).text();-1===e.toLowerCase().indexOf(t)&&-1===i.toLowerCase().indexOf(t)&&t.length>0?$(this).hide():$(this).show()})}),$("#local_file").on("change",function(e){e.preventDefault(),$('input[name="local_file"]').val($(this).val())}),$('input[name="local_file"]').on("click",function(e){e.preventDefault(),$("#local_file").trigger("click")}),$("#movie-tags").css("height",$("#video-player video").height()),$(".movie-tag").on("click",function(e){e.preventDefault();var t=$(this).data("second");$("#video-player video").get(0).currentTime=t}),$("#create_movie_external_frm").on("submit",function(e){var t=this;e.preventDefault();var i=$(this).find('button[type="submit"]');showSpinner(i);var n={alias:$('input[name="alias"]',this).val(),description:$("#description",this).val(),external_file:$('input[name="external_file"]',this).val()};axios.post("/user/movie/create/external",qs.stringify(n)).then(function(){hideSpinner(i),clearForm($(t)),showMessage("Movie successfully created.")}).catch(function(e){hideSpinner(i),processErrors(e,$(t))})}),$("#create_movie_local_frm").on("submit",function(e){var t=this;e.preventDefault();var i=$(this).find('button[type="submit"]');showSpinner(i);var n=new FormData;n.append("alias",$('input[name="alias"]',this).val()),n.append("description",$("#description",this).val()),n.append("local_file",$('input[type="file"]',this)[0].files[0]),axios.post("/user/movie/create/local",n).then(function(){hideSpinner(i),clearForm($(t)),showMessage("Movie successfully created.")}).catch(function(e){hideSpinner(i),processErrors(e,$(t))})}),$("body").on("submit","#edit_file_frm",function(e){e.preventDefault(),updateFile()}),$(".view-movie").on("click",function(e){e.preventDefault();var t=$(this).parents("tr").attr("id");window.open("/user/movie/view/"+t,"_blank")}),$(".delete-movie").on("click",function(e){e.preventDefault();var t=$(this).parents("tr"),i=t.attr("id"),n=$("td:eq(1)",t).text().trim();showConfirmation('Do you really want delete "'+n+'"?').then(function(e){e&&function(e){var t={id:e};axios.post("/user/movie/delete",qs.stringify(t)).then(function(){$("#"+e).remove(),showMessage("Movie successfully deleted.")}).catch(function(){showError("Error deleting movie.")})}(i)})}),$(".edit-movie").on("click",function(e){e.preventDefault();var t=$(this).parents("tr"),i=t.attr("id"),n=t.data("file_alias"),o=t.data("file_description"),r=$("<form />").attr("id","edit_movie_frm").append($("<div />").addClass("form-group").append($("<input />").addClass("form-control").attr({type:"text",name:"alias",autocomplete:"off",placeholder:"New file alias"}).val(n)).append($("<textarea />").addClass("form-control").attr({id:"description",rows:"3",placeholder:"New file description"}).val(o)));showEdit("Edit File",r.get(0)).then(function(e){e&&function(e){var t=$("#edit_movie_frm"),i=$('input[name="alias"]',t).val(),n=$("#description",t).val(),o={id:e,alias:i,description:n};axios.post("/user/movie/update",qs.stringify(o)).then(function(){$("#"+e).find("td:eq(1)").html(i),$("#"+e).find("td:eq(2)").html(n),showMessage("Movie successfully updated.")}).catch(function(){showError("Error editing movie.")})}(i)})}),$("#group_movies_frm").on("submit",function(e){var t=this;e.preventDefault();var i=$(this).find('button[type="submit"]'),n=[];if($(".select-movie:checked").each(function(){n.push($(this).val())}),0===n.length)return showError("Please, select movies you want add to collection."),!1;if("0"===$("#collections_list",this).val())return showError("Please, select collection for selected movies."),!1;var o={collection_id:$("#collections_list",this).val(),selected_movies:n};showSpinner(i),axios.post("/user/movies/group",qs.stringify(o)).then(function(){hideSpinner(i),clearForm($(t)),showMessage("Movies successfully added to the collection.").then(function(){return window.location.reload()})}).catch(function(e){hideSpinner(i),processErrors(e,$(t))})}),$("#select_all_files").on("click",function(){var e=$(this).prop("checked");$(".select-movie").each(function(){$(this).prop("checked",e)})})})}});